"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[3432],{5164:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>c,contentTitle:()=>d,default:()=>w,frontMatter:()=>r,metadata:()=>i,toc:()=>h});var o=n(4848),s=n(8453);const r={sidebar_position:1},d="Networking Topology",i={id:"examples/topology",title:"Networking Topology",description:"Two directly connected hosts",source:"@site/docs/examples/topology.md",sourceDirName:"examples",slug:"/examples/topology",permalink:"/examples/topology",draft:!1,unlisted:!1,editUrl:"https://github.com/cunicu/gont/tree/main/docs/website/docs/examples/topology.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"docsSidebar",previous:{title:"Examples",permalink:"/examples/"},next:{title:"Execute code",permalink:"/examples/exec"}},c={},h=[{value:"Two directly connected hosts",id:"two-directly-connected-hosts",level:2},{value:"Lets add a L2 switch",id:"lets-add-a-l2-switch",level:2},{value:"How about a L3 router?",id:"how-about-a-l3-router",level:2},{value:"Lets do some evil NATing \ud83d\ude08",id:"lets-do-some-evil-nating-",level:2},{value:"How about a whole chain of routers?",id:"how-about-a-whole-chain-of-routers",level:2}];function a(t){const e={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,s.R)(),...t.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.header,{children:(0,o.jsx)(e.h1,{id:"networking-topology",children:"Networking Topology"})}),"\n",(0,o.jsx)(e.h2,{id:"two-directly-connected-hosts",children:"Two directly connected hosts"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-go",children:'import gont "github.com/cunicu/gont/v2/pkg"\nimport opt "github.com/cunicu/gont/v2/pkg/options"\n\n ...\n\nnetwork, _ := gont.NewNetwork("mynet")\n\nhost1, _ := network.AddHost("host1")\nhost2, _ := network.AddHost("host2")\n\nnetwork.AddLink(\n  gont.NewInterface("eth0", host1, opt.AddressIP("10.0.0.1/24")),\n  gont.NewInterface("eth0", host2, opt.AddressIP("10.0.0.2/24")))\n\nhost1.Ping(host2)\n'})}),"\n",(0,o.jsxs)(e.p,{children:["(We ",(0,o.jsx)(e.code,{children:"opt"})," throughout these examples as an import alias)"]}),"\n",(0,o.jsx)(e.h2,{id:"lets-add-a-l2-switch",children:"Lets add a L2 switch"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-go",children:'switch1, _ := network.AddSwitch("switch1")\n\nhost1, _ := network.AddHost("host1",\n  gont.NewInterface("eth0", switch1,\n    opt.AddressIP("10.0.0.1/24")))\n\nhost2, _ := network.AddHost("host2",\n  gont.NewInterface("eth0", switch1,\n    opt.AddressIP("10.0.0.2/24")))\n\nhost1.Ping(host2)\n'})}),"\n",(0,o.jsx)(e.h2,{id:"how-about-a-l3-router",children:"How about a L3 router?"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-go",children:'switch1, _ := network.AddSwitch("switch1")\nswitch2, _ := network.AddSwitch("switch2")\n\nhost1, _ := network.AddHost("host1",\n  gont.NewInterface("eth0", switch1,\n    opt.AddressIP("10.0.0.2/24")))\nhost2, _ := network.AddHost("host2",\n  gont.NewInterface("eth0", switch2,\n    opt.AddressIP("10.0.1.2/24")))\n\nnetwork.AddRouter("router1",\n  gont.NewInterface("eth0", sw1, opt.AddressIP("10.0.0.1/24")),\n  gont.NewInterface("eth1", sw2, opt.AddressIP("10.0.1.1/24")))\n\nhost1.Ping(host2)\n'})}),"\n",(0,o.jsx)(e.h2,{id:"lets-do-some-evil-nating-",children:"Lets do some evil NATing \ud83d\ude08"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-go",children:'switch1, _ := network.AddSwitch("switch1")\nswitch2, _ := network.AddSwitch("switch2")\n\nhost1, _ := network.AddHost("host1",\n  gont.NewInterface("eth0", switch1,\n    opt.AddressIP("10.0.0.2/24")))\nhost2, _ := network.AddHost("host2",\n  gont.NewInterface("eth0", switch2,\n    opt.AddressIP("10.0.1.2/24")))\n\nnetwork.AddNAT("n1",\n  gont.NewInterface("eth0", switch1,\n    opt.SouthBound,\n    opt.AddressIP("10.0.0.1/24")),\n  gont.NewInterface("eth1", switch2,\n    opt.NorthBound,\n    opt.AddressIP("10.0.1.1/24")))\n\nhost1.Ping(host2)\n'})}),"\n",(0,o.jsx)(e.h2,{id:"how-about-a-whole-chain-of-routers",children:"How about a whole chain of routers?"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-go",children:'var firstSwitch *gont.Switch = network.AddSwitch("switch0")\nvar lastSwitch  *gont.Switch = nil\n\nfor i := 1; i < 100; i++ {\n  switchName := fmt.Printf("switch%d", i)\n  routerName := fmt.Printf("router%d", i)\n\n  newSwitch, _ := network.AddSwitch(switchName)\n\n  network.AddRouter(routerName,\n    gont.NewInterface("eth0", lastSwitch,\n      opt.AddressIP("10.0.0.1/24")),\n    gont.NewInterface("eth1", newSwitch,\n      opt.AddressIP("10.0.1.1/24"))\n  )\n\n  lastSwitch = newSwitch\n}\n\nhost1, _ := network.AddHost("host1",\n  gont.NewInterface("eth0", firstSwitch,\n    opt.AddressIP("10.0.0.2/24")))\nhost2, _ := network.AddHost("host2",\n  gont.NewInterface("eth0", lastSwitch,\n    opt.AddressIP("10.0.1.2/24")))\n\nhost1.Ping(host2)\n'})})]})}function w(t={}){const{wrapper:e}={...(0,s.R)(),...t.components};return e?(0,o.jsx)(e,{...t,children:(0,o.jsx)(a,{...t})}):a(t)}},8453:(t,e,n)=>{n.d(e,{R:()=>d,x:()=>i});var o=n(6540);const s={},r=o.createContext(s);function d(t){const e=o.useContext(r);return o.useMemo((function(){return"function"==typeof t?t(e):{...e,...t}}),[e,t])}function i(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(s):t.components||s:d(t.components),o.createElement(r.Provider,{value:e},t.children)}}}]);